<!-- src/app/pages/relatorioreceitas/relatorioreceitas.component.html -->
<app-navbarfuncionario></app-navbarfuncionario>
<div class="container mt-4">
  <!-- Filtro por data -->
  <div class="row mb-3">
    <div class="col-md-6">
      <label for="dataInicial" class="form-label">Data Inicial:</label>
      <input
        id="dataInicial"
        type="date"
        class="form-control"
        [(ngModel)]="dataInicial"
        name="dataInicial"
      >
    </div>
    <div class="col-md-6">
      <label for="dataFinal" class="form-label">Data Final:</label>
      <input
        id="dataFinal"
        type="date"
        class="form-control"
        [(ngModel)]="dataFinal"
        name="dataFinal"
      >
    </div>
  </div>

  <!-- Botões de relatório em PDF -->
  <div class="mb-4">
    <button class="btn btn-primary me-2" (click)="gerarPDFDiario()">
      Gerar PDF (Por Dia)
    </button>
    <button class="btn btn-warning" (click)="gerarPDFCategoria()">
      Gerar PDF (Por Categoria)
    </button>
    <button class="btn btn-success ms-2" (click)="atualizarRelatorio()">
      Atualizar Dados
    </button>
  </div>

  <!-- Tabela de receitas por dia -->
  <div *ngIf="receitasPorDia.length">
    <h5>Receitas por Dia</h5>
    <table class="table table-striped table-bordered mb-5">
      <thead class="table-dark">
        <tr>
          <th>Data</th>
          <th>Total (R$)</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let r of receitasPorDia">
          <td>{{ r.data }}</td>
          <td>{{ r.total | number:'1.2-2' }}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Tabela de receitas por categoria -->
  <div *ngIf="receitasPorCategoria.length">
    <h5>Receitas por Categoria</h5>
    <table class="table table-striped table-bordered mb-5">
      <thead class="table-dark">
        <tr>
          <th>Categoria</th>
          <th>Total (R$)</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let c of receitasPorCategoria">
          <td>{{ c.categoria }}</td>
          <td>{{ c.total | number:'1.2-2' }}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Mensagem caso não haja dados -->
  <div *ngIf="!receitasPorDia.length && !receitasPorCategoria.length" class="alert alert-info">
    Nenhum registro de receita encontrado para o período selecionado.
  </div>
</div>
